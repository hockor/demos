<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>style-src 演示</title>
  <!-- 本地样式表 -->
  <link rel="stylesheet"  href="style.css">
  <!-- 来自允许域的外部样式表 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <!-- 来自不允许域的外部样式表 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <!-- 内联样式 -->
  <style nonce="416d1177">
  .inline-style-box {
      background-color: purple;
      color: white;
      padding: 20px;
      margin: 10px 0;
      border-radius: 5px;
    }
    </style>
  <script src="script.js"></script>
</head>
<body>
  <div class="container">
    <h1 class="animate__animated animate__bounce">CSP style-src 指令演示</h1>
    <p>本页面设置了: <code>default-src 'self'; style-src 'self' https://cdnjs.cloudflare.com</code></p>
    
    <div class="demo-section">
      <h2>样式加载测试</h2>
      
      <div class="test-case">
        <h3>1. 本地样式（应该成功）</h3>
        <div class="local-style-box">
          这个元素应该有绿色背景和白色文字（来自本地style.css）
        </div>
      </div>
      
      <div class="test-case">
        <h3>2. 允许的CDN样式（应该成功）</h3>
        <div class="animate__animated animate__fadeIn" id="allowed-cdn">
          这个元素应该有淡入效果（来自允许的CDN - cdnjs.cloudflare.com）
        </div>
        <button id="test-animation">测试动画</button>
      </div>
      
      <div class="test-case">
        <h3>3. 不允许的CDN样式（应该失败）</h3>
        <div class="alert alert-primary" role="alert" id="blocked-cdn">
          这个元素应该没有Bootstrap样式（来自被阻止的CDN - jsdelivr.net）
        </div>
      </div>
      
      <div class="test-case">
        <h3>4. 内联样式（应该失败）</h3>
        <div class="inline-style-box" id="inline-style">
          这个元素应该没有紫色背景和白色文字（内联样式应该被阻止）
        </div>
      </div>
      
      <div class="test-case">
        <h3>5. 行内style属性（应该失败）</h3>
        <div style="background-color: orange; color: white; padding: 20px; border-radius: 5px;" id="inline-attr">
          这个元素应该没有橙色背景（行内style属性应该被阻止）
        </div>
      </div>
      
      <div class="test-case">
        <h3>6. JavaScript添加的样式（应该成功）</h3>
        <div id="js-style">
          点击按钮尝试用JS添加蓝色背景样式
        </div>
        <button id="add-style-btn">添加样式</button>
      </div>
    </div>
    
    <div class="note">
      <p><strong>注意:</strong> 请查看浏览器控制台，以观察CSP阻止了哪些样式加载</p>
    </div>
  </div>
</body>
</html> 