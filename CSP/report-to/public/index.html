<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSP Report-To 演示</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>CSP Report-To 演示</h1>
    <p>这个页面展示了 CSP report-to 指令和 Reporting API 的工作原理。</p>
    <p>当 CSP 策略被违反时，浏览器会向指定的报告组发送详细的违规报告。</p>
    
    <div id="safeContent">
        <h2>安全内容区域</h2>
        <button id="loadSafeScript">加载安全脚本</button>
        <div id="safeResult"></div>
    </div>
    
    <div id="unsafeContent">
        <h2>不安全内容区域（违反 CSP）</h2>
        <button id="triggerInlineScript">触发内联脚本（违反 CSP）</button>
        <div id="unsafeResult"></div>
    </div>

    <div class="note">
        <h3>关于 Reporting API</h3>
        <p>注意: Report-To 需要浏览器支持 Reporting API。</p>
        <p>查看浏览器控制台和服务器控制台来观察报告行为。</p>
    </div>
    
    <!-- 这个是符合 CSP 的外部脚本 -->
    <script src="safe.js"></script>
    
    <!-- 这个内联脚本会违反 CSP 规则并触发报告 -->
    <script>
        // 这个内联脚本会违反 CSP 策略并触发分组报告
        $(document).ready(function() {
            $('#triggerInlineScript').click(function() {
                $('#unsafeResult').text('如果你看到这条消息，说明 CSP 未正确实施。检查控制台！');
            });
        });
    </script>
</body>
</html> 